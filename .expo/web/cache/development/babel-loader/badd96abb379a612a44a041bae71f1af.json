{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\sawan\\\\Desktop\\\\stuff\\\\EWI-Installer-App-v2 - Copy (2)\\\\app\\\\App.js\";\n\nimport React, { useEffect, useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { NavigationContainer } from \"@react-navigation/native\";\nimport { createStackNavigator } from \"@react-navigation/stack\";\nimport { createBottomTabNavigator } from \"@react-navigation/bottom-tabs\";\nimport { createDrawerNavigator } from \"@react-navigation/drawer\";\nimport AsyncStorage from '@react-native-community/async-storage';\nimport { Entypo } from '@expo/vector-icons';\nimport styles from \"./styles\";\nimport { AuthContext } from \"./context\";\nimport { SignIn, CreateAccount, Projects, BarcodeScreen, JobsScreen, Details, Prospects, Profile, Splash, CameraScreen } from \"./Screens\";\nvar USER_STORAGE_KEY = '@save_user';\nvar USER_TYPE_STORAGE_KEY = '@save_user_type';\nvar AUTH_STORAGE_KEY = '@save_auth';\nvar JWT_STORAGE_KEY = '@save_jwt';\n\nvar Burger = function Burger() {\n  return React.createElement(Entypo, {\n    name: \"menu\",\n    style: styles.iconStyle,\n    size: 36,\n    color: \"black\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 5\n    }\n  });\n};\n\nvar burgerOptions = function burgerOptions(_ref) {\n  var navigation = _ref.navigation;\n  return {\n    headerLeft: function headerLeft() {\n      return React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return navigation.toggleDrawer();\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 61\n        }\n      }, React.createElement(Burger, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 121\n        }\n      }));\n    }\n  };\n};\n\nvar JobsStack = createStackNavigator();\n\nvar JobsStackScreen = function JobsStackScreen(_ref2) {\n  var navigation = _ref2.navigation,\n      route = _ref2.route;\n  return React.createElement(JobsStack.Navigator, {\n    screenOptions: burgerOptions,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 3\n    }\n  }, React.createElement(JobsStack.Screen, {\n    name: \"Jobs\",\n    component: JobsScreen,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 5\n    }\n  }));\n};\n\nvar ProfileStack = createStackNavigator();\n\nvar ProfileStackScreen = function ProfileStackScreen() {\n  return React.createElement(ProfileStack.Navigator, {\n    screenOptions: burgerOptions,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 3\n    }\n  }, React.createElement(ProfileStack.Screen, {\n    name: \"Profile\",\n    component: Profile,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }));\n};\n\nvar BarcodeStack = createStackNavigator();\n\nvar BarcodeStackScreen = function BarcodeStackScreen() {\n  return React.createElement(BarcodeStack.Navigator, {\n    screenOptions: burgerOptions,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 3\n    }\n  }, React.createElement(BarcodeStack.Screen, {\n    name: \"Barcode\",\n    component: BarcodeScreen,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }\n  }));\n};\n\nvar CameraStack = createStackNavigator();\n\nvar CameraStackScreen = function CameraStackScreen() {\n  return React.createElement(CameraStack.Navigator, {\n    screenOptions: burgerOptions,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 3\n    }\n  }, React.createElement(CameraStack.Screen, {\n    name: \"Camera\",\n    component: CameraScreen,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }));\n};\n\nvar UtilityTabs = createBottomTabNavigator();\n\nvar UtilityTabScreen = function UtilityTabScreen() {\n  return React.createElement(UtilityTabs.Navigator, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 3\n    }\n  }, React.createElement(UtilityTabs.Screen, {\n    name: \"Barcode\",\n    component: BarcodeStackScreen,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }), React.createElement(UtilityTabs.Screen, {\n    name: \"Camera\",\n    component: CameraStackScreen,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }));\n};\n\nvar Tabs = createBottomTabNavigator();\n\nvar TabsScreen = function TabsScreen() {\n  return React.createElement(Tabs.Navigator, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 3\n    }\n  }, React.createElement(Tabs.Screen, {\n    name: \"Jobs\",\n    component: JobsStackScreen,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }\n  }));\n};\n\nvar Drawer = createDrawerNavigator();\n\nvar DrawerScreen = function DrawerScreen(_ref3) {\n  var route = _ref3.route;\n\n  var _React$useContext = React.useContext(AuthContext),\n      getJwt = _React$useContext.getJwt;\n\n  var _React$useContext2 = React.useContext(AuthContext),\n      readJWTcontext = _React$useContext2.readJWTcontext;\n\n  React.useEffect(function () {\n    console.log(\"here\", jwtToken);\n\n    if (route.params.userToken && route.params.userName && route.params.userType) {\n      getJwt(route.params.userToken.userToken, route.params.userName.userName, route.params.userType.userType);\n      readJWTcontext();\n    }\n  }, [route.params.userToken, route.params.userName, route.params.userType]);\n  return React.createElement(Drawer.Navigator, {\n    initialRouteName: \"Jobs\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 3\n    }\n  }, React.createElement(Drawer.Screen, {\n    name: \"Jobs\",\n    component: TabsScreen,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }\n  }), React.createElement(Drawer.Screen, {\n    name: \"Utilities\",\n    component: UtilityTabScreen,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }\n  }), React.createElement(Drawer.Screen, {\n    name: \"Profile\",\n    component: ProfileStackScreen,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }\n  }));\n};\n\nvar AuthStack = createStackNavigator();\n\nvar AuthStackScreen = function AuthStackScreen() {\n  return React.createElement(AuthStack.Navigator, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 3\n    }\n  }, React.createElement(AuthStack.Screen, {\n    name: \"SignIn\",\n    component: SignIn,\n    options: {\n      title: \"Sign In\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 5\n    }\n  }), React.createElement(AuthStack.Screen, {\n    name: \"CreateAccount\",\n    component: CreateAccount,\n    options: {\n      title: \"Create Account\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 5\n    }\n  }));\n};\n\nvar RootStack = createStackNavigator();\n\nvar RootStackScreen = function RootStackScreen(_ref4) {\n  var userToken = _ref4.userToken,\n      userName = _ref4.userName,\n      userType = _ref4.userType,\n      jwtToken = _ref4.jwtToken;\n  return React.createElement(RootStack.Navigator, {\n    headerMode: \"none\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 3\n    }\n  }, userToken && userName && userType ? React.createElement(RootStack.Screen, {\n    name: \"App\",\n    component: DrawerScreen,\n    options: {\n      animationEnabled: false\n    },\n    initialParams: {\n      userToken: {\n        userToken: userToken\n      },\n      userName: {\n        userName: userName\n      },\n      userType: {\n        userType: userType\n      },\n      jwtToken: {\n        jwtToken: jwtToken\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }\n  }) : React.createElement(RootStack.Screen, {\n    name: \"Auth\",\n    component: AuthStackScreen,\n    options: {\n      animationEnabled: false\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default (function () {\n  var _React$useState = React.useState(true),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      isLoading = _React$useState2[0],\n      setIsLoading = _React$useState2[1];\n\n  var _React$useState3 = React.useState(null),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      userToken = _React$useState4[0],\n      setUserToken = _React$useState4[1];\n\n  var _React$useState5 = React.useState(null),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      user = _React$useState6[0],\n      setUser = _React$useState6[1];\n\n  var _React$useState7 = React.useState(null),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      userType = _React$useState8[0],\n      setUserType = _React$useState8[1];\n\n  var _React$useState9 = React.useState(null),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      jwtToken = _React$useState10[0],\n      setJwtToken = _React$useState10[1];\n\n  var saveAuth = function saveAuth(auth_key, userName, userType) {\n    return _regeneratorRuntime.async(function saveAuth$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(AUTH_STORAGE_KEY, auth_key));\n\n          case 3:\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(USER_STORAGE_KEY, userName));\n\n          case 5:\n            _context.next = 7;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(USER_TYPE_STORAGE_KEY, userType));\n\n          case 7:\n            _context.next = 12;\n            break;\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](0);\n            alert('Failed to save session storage');\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 9]], Promise);\n  };\n\n  var saveJWT = function saveJWT(jwt) {\n    return _regeneratorRuntime.async(function saveJWT$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(JWT_STORAGE_KEY, jwt));\n\n          case 3:\n            _context2.next = 8;\n            break;\n\n          case 5:\n            _context2.prev = 5;\n            _context2.t0 = _context2[\"catch\"](0);\n            alert('Failed to save JWT');\n\n          case 8:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 5]], Promise);\n  };\n\n  var readAuth = function readAuth() {\n    var user_token, user_name, user_type;\n    return _regeneratorRuntime.async(function readAuth$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(AUTH_STORAGE_KEY));\n\n          case 3:\n            user_token = _context3.sent;\n            _context3.next = 6;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(USER_STORAGE_KEY));\n\n          case 6:\n            user_name = _context3.sent;\n            _context3.next = 9;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(USER_TYPE_STORAGE_KEY));\n\n          case 9:\n            user_type = _context3.sent;\n\n            if (user_token !== null && user_name !== null && user_type !== null) {\n              setUserToken(user_token);\n              setUser(user_name);\n              setUserType(user_type);\n            } else {\n              setUserToken('');\n              setUser('');\n              setUserType('');\n            }\n\n            _context3.next = 16;\n            break;\n\n          case 13:\n            _context3.prev = 13;\n            _context3.t0 = _context3[\"catch\"](0);\n            alert('Failed to fetch session storage');\n\n          case 16:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[0, 13]], Promise);\n  };\n\n  var readJWT = function readJWT() {\n    var user_jwt;\n    return _regeneratorRuntime.async(function readJWT$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.prev = 0;\n            _context4.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(JWT_STORAGE_KEY));\n\n          case 3:\n            user_jwt = _context4.sent;\n\n            if (user_jwt !== null) {\n              setJwtToken(user_jwt);\n            } else {\n              setJwtToken('');\n            }\n\n            _context4.next = 10;\n            break;\n\n          case 7:\n            _context4.prev = 7;\n            _context4.t0 = _context4[\"catch\"](0);\n            alert('Failed to fetch session storage');\n\n          case 10:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n\n  var fetchJwt = function fetchJwt(userToken, user, userType) {\n    var data = {\n      method: 'POST',\n      mode: \"cors\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        \"username\": user,\n        \"auth_key\": userToken,\n        \"updateAuth\": true,\n        \"user_type\": userType\n      })\n    };\n    return fetch('https://api-veen-e.ewipro.com/v1/authenticate/', data).then(function (response) {\n      if (!response.ok) throw new Error(response.status);else return response.json();\n    }).then(function (responseData) {\n      saveJWT(responseData.jwt);\n    }).catch(function (error) {});\n  };\n\n  var clearStorage = function clearStorage() {\n    return _regeneratorRuntime.async(function clearStorage$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.prev = 0;\n            _context5.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.clear());\n\n          case 3:\n            _context5.next = 8;\n            break;\n\n          case 5:\n            _context5.prev = 5;\n            _context5.t0 = _context5[\"catch\"](0);\n            alert('Failed to clear session storage');\n\n          case 8:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, null, null, [[0, 5]], Promise);\n  };\n\n  var authContext = React.useMemo(function () {\n    return {\n      signIn: function signIn(auth_key, userName, userType) {\n        setUserToken(auth_key);\n        setIsLoading(false);\n        saveAuth(auth_key, userName, userType);\n      },\n      signUp: function signUp() {\n        setIsLoading(false);\n        setUserToken(\"asdf\");\n      },\n      signOut: function signOut() {\n        setIsLoading(false);\n        setUserToken(null);\n        clearStorage();\n      },\n      getJwt: function getJwt(user_token, user_name, user_type) {\n        fetchJwt(user_token, user_name, user_type);\n      },\n      readJWTcontext: function readJWTcontext() {\n        readJWT();\n      }\n    };\n  }, []);\n  React.useEffect(function () {\n    setTimeout(function () {\n      setIsLoading(false);\n    }, 1000);\n  }, []);\n  React.useEffect(function () {\n    readAuth();\n  }, []);\n\n  if (isLoading) {\n    return React.createElement(Splash, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return React.createElement(AuthContext.Provider, {\n    value: authContext,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 5\n    }\n  }, React.createElement(NavigationContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 7\n    }\n  }, React.createElement(RootStackScreen, {\n    userToken: userToken,\n    userName: user,\n    userType: userType,\n    jwtToken: jwtToken,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 9\n    }\n  })));\n});","map":{"version":3,"sources":["C:/Users/sawan/Desktop/stuff/EWI-Installer-App-v2 - Copy (2)/app/App.js"],"names":["React","useEffect","useState","NavigationContainer","createStackNavigator","createBottomTabNavigator","createDrawerNavigator","AsyncStorage","Entypo","styles","AuthContext","SignIn","CreateAccount","Projects","BarcodeScreen","JobsScreen","Details","Prospects","Profile","Splash","CameraScreen","USER_STORAGE_KEY","USER_TYPE_STORAGE_KEY","AUTH_STORAGE_KEY","JWT_STORAGE_KEY","Burger","iconStyle","burgerOptions","navigation","headerLeft","toggleDrawer","JobsStack","JobsStackScreen","route","ProfileStack","ProfileStackScreen","BarcodeStack","BarcodeStackScreen","CameraStack","CameraStackScreen","UtilityTabs","UtilityTabScreen","Tabs","TabsScreen","Drawer","DrawerScreen","useContext","getJwt","readJWTcontext","console","log","jwtToken","params","userToken","userName","userType","AuthStack","AuthStackScreen","title","RootStack","RootStackScreen","animationEnabled","isLoading","setIsLoading","setUserToken","user","setUser","setUserType","setJwtToken","saveAuth","auth_key","setItem","alert","saveJWT","jwt","readAuth","getItem","user_token","user_name","user_type","readJWT","user_jwt","fetchJwt","data","method","mode","headers","body","JSON","stringify","fetch","then","response","ok","Error","status","json","responseData","catch","error","clearStorage","clear","authContext","useMemo","signIn","signUp","signOut","setTimeout"],"mappings":"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","sourcesContent":["import React, { useEffect, useState }  from \"react\";\r\nimport { View, Text, StyleSheet, Button, TextInput, TouchableOpacity, Image } from \"react-native\";\r\nimport { NavigationContainer } from \"@react-navigation/native\";\r\nimport { createStackNavigator } from \"@react-navigation/stack\";\r\nimport { createBottomTabNavigator } from \"@react-navigation/bottom-tabs\";\r\nimport { createDrawerNavigator } from \"@react-navigation/drawer\";\r\nimport AsyncStorage from '@react-native-community/async-storage'\r\n//import { RNCamera } from 'react-native-camera';\r\nimport { Entypo } from '@expo/vector-icons';\r\nimport styles from './styles'\r\nimport { AuthContext } from \"./context\";\r\nimport {\r\n  SignIn,\r\n  CreateAccount,\r\n  Projects,\r\n  BarcodeScreen,\r\n  JobsScreen,\r\n  Details,\r\n  Prospects,\r\n  Profile,\r\n  Splash,\r\n  CameraScreen,\r\n} from \"./Screens\";\r\n\r\nconst USER_STORAGE_KEY = '@save_user'\r\nconst USER_TYPE_STORAGE_KEY = '@save_user_type'\r\nconst AUTH_STORAGE_KEY = '@save_auth'\r\nconst JWT_STORAGE_KEY = '@save_jwt'\r\n\r\n\r\nconst Burger = () => {\r\n  return (\r\n    <Entypo name=\"menu\" style={styles.iconStyle} size={36} color=\"black\" />\r\n  );\r\n}\r\n\r\nconst burgerOptions = ({navigation}) => ({headerLeft: () => <TouchableOpacity onPress={() => navigation.toggleDrawer()}><Burger/></TouchableOpacity>,})\r\n\r\n\r\nconst JobsStack = createStackNavigator();\r\nconst JobsStackScreen = ({navigation, route}) => {\r\n  return (\r\n  <JobsStack.Navigator screenOptions={burgerOptions}>\r\n    <JobsStack.Screen name=\"Jobs\" component={JobsScreen}/>\r\n  </JobsStack.Navigator>\r\n)};\r\n\r\n\r\n\r\nconst ProfileStack = createStackNavigator();\r\nconst ProfileStackScreen = () => (\r\n  <ProfileStack.Navigator screenOptions={burgerOptions}>\r\n    <ProfileStack.Screen name=\"Profile\" component={Profile} />\r\n  </ProfileStack.Navigator>\r\n);\r\n\r\nconst BarcodeStack = createStackNavigator();\r\nconst BarcodeStackScreen = () => (\r\n  <BarcodeStack.Navigator screenOptions={burgerOptions}>\r\n    <BarcodeStack.Screen name=\"Barcode\" component={BarcodeScreen} />\r\n  </BarcodeStack.Navigator>\r\n);\r\n\r\nconst CameraStack = createStackNavigator();\r\nconst CameraStackScreen = () => (\r\n  <CameraStack.Navigator  screenOptions={burgerOptions}>\r\n    <CameraStack.Screen name=\"Camera\" component={CameraScreen} />\r\n  </CameraStack.Navigator>\r\n);\r\n\r\nconst UtilityTabs = createBottomTabNavigator();\r\nconst UtilityTabScreen = () => (\r\n  <UtilityTabs.Navigator>\r\n    <UtilityTabs.Screen name=\"Barcode\" component={BarcodeStackScreen}  />\r\n    <UtilityTabs.Screen name=\"Camera\" component={CameraStackScreen} />\r\n  </UtilityTabs.Navigator>\r\n);\r\n\r\nconst Tabs = createBottomTabNavigator();\r\nconst TabsScreen = () => (\r\n  <Tabs.Navigator>\r\n    <Tabs.Screen name=\"Jobs\" component={JobsStackScreen}/>\r\n  </Tabs.Navigator>\r\n);\r\n\r\nconst Drawer = createDrawerNavigator();\r\nconst DrawerScreen = ({ route }) => {\r\n  const { getJwt } = React.useContext(AuthContext);\r\n  const { readJWTcontext } = React.useContext(AuthContext);\r\n  React.useEffect(() => {\r\n    console.log(\"here\",jwtToken)\r\n    if (route.params.userToken && route.params.userName  && route.params.userType ) {\r\n      getJwt(route.params.userToken.userToken, route.params.userName.userName, route.params.userType.userType)\r\n      readJWTcontext();\r\n    }\r\n  }, [route.params.userToken, route.params.userName,route.params.userType]);\r\n\r\n  return(\r\n  <Drawer.Navigator initialRouteName=\"Jobs\">\r\n    <Drawer.Screen name=\"Jobs\" component={TabsScreen}/>\r\n    <Drawer.Screen name=\"Utilities\" component={UtilityTabScreen} />\r\n    <Drawer.Screen name=\"Profile\" component={ProfileStackScreen} />\r\n  </Drawer.Navigator>\r\n)};\r\n\r\n\r\nconst AuthStack = createStackNavigator();\r\nconst AuthStackScreen = () => (\r\n  <AuthStack.Navigator>\r\n    <AuthStack.Screen\r\n      name=\"SignIn\"\r\n      component={SignIn}\r\n      options={{ title: \"Sign In\" }}\r\n    />\r\n    <AuthStack.Screen\r\n      name=\"CreateAccount\"\r\n      component={CreateAccount}\r\n      options={{ title: \"Create Account\" }}\r\n    />\r\n  </AuthStack.Navigator>\r\n);\r\n\r\n\r\n\r\nconst RootStack = createStackNavigator();\r\nconst RootStackScreen = ({ userToken, userName, userType, jwtToken }) => {\r\n  return (\r\n  <RootStack.Navigator headerMode=\"none\">\r\n    {(userToken && userName && userType) ? (\r\n      <RootStack.Screen\r\n        name=\"App\"\r\n        component={DrawerScreen}\r\n        options={{\r\n          animationEnabled: false\r\n        }} initialParams={{ userToken:{userToken}, userName:{userName},userType:{userType}, jwtToken:{jwtToken} }}\r\n      />\r\n    ) : (\r\n      <RootStack.Screen\r\n        name=\"Auth\"\r\n        component={AuthStackScreen}\r\n        options={{\r\n          animationEnabled: false\r\n        }}\r\n      />\r\n    )}\r\n  </RootStack.Navigator>\r\n)};\r\n\r\nexport default () => {\r\n  const [isLoading, setIsLoading] = React.useState(true);\r\n  const [userToken, setUserToken] = React.useState(null);\r\n  const [user, setUser] = React.useState(null);\r\n  const [userType, setUserType] = React.useState(null);\r\n  const [jwtToken, setJwtToken] = React.useState(null);\r\n  //const [errorOutput, setError] = useState('');\r\n  \r\n  const saveAuth = async (auth_key, userName, userType) => {\r\n    try {\r\n      await AsyncStorage.setItem(AUTH_STORAGE_KEY, auth_key)\r\n      await AsyncStorage.setItem(USER_STORAGE_KEY, userName)\r\n      await AsyncStorage.setItem(USER_TYPE_STORAGE_KEY, userType)\r\n    } catch (e) {\r\n      alert('Failed to save session storage')\r\n    }\r\n  }\r\n\r\n  const saveJWT= async (jwt) => {\r\n    try {\r\n      await AsyncStorage.setItem(JWT_STORAGE_KEY, jwt)\r\n    } catch (e) {\r\n      alert('Failed to save JWT')\r\n    }\r\n  }\r\n\r\n  const readAuth = async () => {\r\n    try {\r\n      const user_token = await AsyncStorage.getItem(AUTH_STORAGE_KEY)\r\n      const user_name = await AsyncStorage.getItem(USER_STORAGE_KEY)\r\n      const user_type = await AsyncStorage.getItem(USER_TYPE_STORAGE_KEY)\r\n      if (user_token !== null && user_name !== null && user_type !== null) {\r\n        setUserToken(user_token)\r\n        setUser(user_name)\r\n        setUserType(user_type)\r\n      }\r\n      else{\r\n        setUserToken('') \r\n        setUser('')\r\n        setUserType('')\r\n      }\r\n    } catch (e) {\r\n      alert('Failed to fetch session storage')\r\n    }\r\n  }\r\n\r\n  const readJWT = async () => {\r\n    try {\r\n      const user_jwt = await AsyncStorage.getItem(JWT_STORAGE_KEY)\r\n      if (user_jwt !== null) {\r\n        setJwtToken(user_jwt)\r\n      }\r\n      else{\r\n        setJwtToken('')\r\n      }\r\n    } catch (e) {\r\n      alert('Failed to fetch session storage')\r\n    }\r\n  }\r\n\r\n  const fetchJwt = (userToken, user, userType ) => {\r\n    let data = {\r\n      method: 'POST',\r\n      mode: \"cors\", // no-cors, cors, *same-origin *=default\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\"username\": user,\"auth_key\": userToken, \"updateAuth\":true,\"user_type\":userType})\r\n    };\r\n    return fetch('https://api-veen-e.ewipro.com/v1/authenticate/', data)\r\n    .then((response) => {\r\n        if(!response.ok) throw new Error(response.status);\r\n        else return response.json();\r\n      })\r\n    .then((responseData) => {\r\n      saveJWT(responseData.jwt)\r\n    })\r\n    .catch((error) => {\r\n    });\r\n  }\r\n\r\n\r\n\r\n\r\n  const clearStorage = async () => {\r\n    try {\r\n      await AsyncStorage.clear()\r\n    } catch (e) {\r\n      alert('Failed to clear session storage')\r\n    }\r\n  }\r\n\r\n  const authContext = React.useMemo(() => {\r\n    return {\r\n      signIn: (auth_key, userName, userType) => {\r\n        setUserToken(auth_key);\r\n        setIsLoading(false);\r\n        saveAuth(auth_key, userName, userType);\r\n      },\r\n      signUp: () => {\r\n        setIsLoading(false);\r\n        setUserToken(\"asdf\");\r\n      },\r\n      signOut: () => {\r\n        setIsLoading(false);\r\n        setUserToken(null);\r\n        clearStorage();\r\n      },\r\n      getJwt: (user_token, user_name, user_type) => {\r\n        fetchJwt(user_token, user_name, user_type)\r\n      },\r\n      readJWTcontext: () =>{\r\n        readJWT();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    setTimeout(() => {\r\n      setIsLoading(false);\r\n    }, 1000);\r\n  }, []);\r\n  React.useEffect(() => {\r\n    readAuth();\r\n  }, []);\r\n\r\n\r\n  if (isLoading) {\r\n    return <Splash />;\r\n  }\r\n\r\n\r\n  return (\r\n    <AuthContext.Provider value={authContext}>\r\n      <NavigationContainer>\r\n        <RootStackScreen userToken={userToken} userName={user} userType={userType} jwtToken={jwtToken}/>\r\n      </NavigationContainer>\r\n    </AuthContext.Provider>\r\n  );\r\n};"]},"metadata":{},"sourceType":"module"}