{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\sawan\\\\Desktop\\\\stuff\\\\EWI-Installer-App-v2 - Copy (2)\\\\app\\\\App.js\";\n\nimport React, { useEffect, useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { NavigationContainer } from \"@react-navigation/native\";\nimport { createStackNavigator } from \"@react-navigation/stack\";\nimport { createBottomTabNavigator } from \"@react-navigation/bottom-tabs\";\nimport { createDrawerNavigator } from \"@react-navigation/drawer\";\nimport AsyncStorage from '@react-native-community/async-storage';\nimport { Entypo } from '@expo/vector-icons';\nimport styles from \"./styles\";\nimport { AuthContext } from \"./context\";\nimport { SignIn, CreateAccount, Projects, BarcodeScreen, JobsScreen, Details, Prospects, Profile, Splash, CameraScreen } from \"./Screens\";\nvar AUTH_STORAGE_KEY = '@save_auth';\nvar JWT_STORAGE_KEY = '@save_jwt';\n\nvar Burger = function Burger() {\n  return React.createElement(Entypo, {\n    name: \"menu\",\n    style: styles.iconStyle,\n    size: 36,\n    color: \"black\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 5\n    }\n  });\n};\n\nvar burgerOptions = function burgerOptions(_ref) {\n  var navigation = _ref.navigation;\n  return {\n    headerLeft: function headerLeft() {\n      return React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return navigation.toggleDrawer();\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 61\n        }\n      }, React.createElement(Burger, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 121\n        }\n      }));\n    }\n  };\n};\n\nvar JobsStack = createStackNavigator();\n\nvar JobsStackScreen = function JobsStackScreen(_ref2) {\n  var navigation = _ref2.navigation,\n      jwtToken = _ref2.jwtToken;\n  return React.createElement(JobsStack.Navigator, {\n    screenOptions: burgerOptions,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 3\n    }\n  }, React.createElement(JobsStack.Screen, {\n    name: \"Jobs\",\n    component: JobsScreen,\n    jwtToken: jwtToken,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 5\n    }\n  }));\n};\n\nvar ProfileStack = createStackNavigator();\n\nvar ProfileStackScreen = function ProfileStackScreen() {\n  return React.createElement(ProfileStack.Navigator, {\n    screenOptions: burgerOptions,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 3\n    }\n  }, React.createElement(ProfileStack.Screen, {\n    name: \"Profile\",\n    component: Profile,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }));\n};\n\nvar BarcodeStack = createStackNavigator();\n\nvar BarcodeStackScreen = function BarcodeStackScreen() {\n  return React.createElement(BarcodeStack.Navigator, {\n    screenOptions: burgerOptions,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 3\n    }\n  }, React.createElement(BarcodeStack.Screen, {\n    name: \"Barcode\",\n    component: BarcodeScreen,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }\n  }));\n};\n\nvar CameraStack = createStackNavigator();\n\nvar CameraStackScreen = function CameraStackScreen() {\n  return React.createElement(CameraStack.Navigator, {\n    screenOptions: burgerOptions,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 3\n    }\n  }, React.createElement(CameraStack.Screen, {\n    name: \"Camera\",\n    component: CameraScreen,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  }));\n};\n\nvar UtilityTabs = createBottomTabNavigator();\n\nvar UtilityTabScreen = function UtilityTabScreen() {\n  return React.createElement(UtilityTabs.Navigator, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 3\n    }\n  }, React.createElement(UtilityTabs.Screen, {\n    name: \"Barcode\",\n    component: BarcodeStackScreen,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  }), React.createElement(UtilityTabs.Screen, {\n    name: \"Camera\",\n    component: CameraStackScreen,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  }));\n};\n\nvar Tabs = createBottomTabNavigator();\n\nvar TabsScreen = function TabsScreen(_ref3) {\n  var jwtToken = _ref3.jwtToken;\n  return React.createElement(Tabs.Navigator, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 3\n    }\n  }, React.createElement(Tabs.Screen, {\n    name: \"Jobs\",\n    component: JobsStackScreen,\n    jwtToken: jwtToken,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }\n  }));\n};\n\nvar Drawer = createDrawerNavigator();\n\nvar DrawerScreen = function DrawerScreen(_ref4) {\n  var jwtToken = _ref4.jwtToken;\n  return React.createElement(Drawer.Navigator, {\n    initialRouteName: \"Jobs\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 3\n    }\n  }, React.createElement(Drawer.Screen, {\n    name: \"Jobs\",\n    component: TabsScreen,\n    jwtToken: jwtToken,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }\n  }), React.createElement(Drawer.Screen, {\n    name: \"Utilities\",\n    component: UtilityTabScreen,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 5\n    }\n  }), React.createElement(Drawer.Screen, {\n    name: \"Profile\",\n    component: ProfileStackScreen,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 5\n    }\n  }));\n};\n\nvar AuthStack = createStackNavigator();\n\nvar AuthStackScreen = function AuthStackScreen() {\n  return React.createElement(AuthStack.Navigator, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 3\n    }\n  }, React.createElement(AuthStack.Screen, {\n    name: \"SignIn\",\n    component: SignIn,\n    options: {\n      title: \"Sign In\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }\n  }), React.createElement(AuthStack.Screen, {\n    name: \"CreateAccount\",\n    component: CreateAccount,\n    options: {\n      title: \"Create Account\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }\n  }));\n};\n\nvar RootStack = createStackNavigator();\n\nvar RootStackScreen = function RootStackScreen(_ref5) {\n  var userToken = _ref5.userToken,\n      jwtToken = _ref5.jwtToken;\n  return React.createElement(RootStack.Navigator, {\n    headerMode: \"none\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 3\n    }\n  }, userToken ? React.createElement(RootStack.Screen, {\n    name: \"App\",\n    component: DrawerScreen,\n    options: {\n      animationEnabled: false\n    },\n    jwtToken: jwtToken,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }) : React.createElement(RootStack.Screen, {\n    name: \"Auth\",\n    component: AuthStackScreen,\n    options: {\n      animationEnabled: false\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default (function () {\n  var _React$useState = React.useState(true),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      isLoading = _React$useState2[0],\n      setIsLoading = _React$useState2[1];\n\n  var _React$useState3 = React.useState(null),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      userToken = _React$useState4[0],\n      setUserToken = _React$useState4[1];\n\n  var _React$useState5 = React.useState(''),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      user = _React$useState6[0],\n      setUser = _React$useState6[1];\n\n  var _React$useState7 = React.useState(null),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      jwtToken = _React$useState8[0],\n      setJWTToken = _React$useState8[1];\n\n  var saveAuth = function saveAuth(auth_key) {\n    return _regeneratorRuntime.async(function saveAuth$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(AUTH_STORAGE_KEY, auth_key));\n\n          case 3:\n            _context.next = 8;\n            break;\n\n          case 5:\n            _context.prev = 5;\n            _context.t0 = _context[\"catch\"](0);\n            alert('Failed to save session storage');\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 5]], Promise);\n  };\n\n  var readAuth = function readAuth() {\n    var user_token;\n    return _regeneratorRuntime.async(function readAuth$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(AUTH_STORAGE_KEY));\n\n          case 3:\n            user_token = _context2.sent;\n\n            if (user_token !== null) {\n              setUserToken(user_token);\n            } else {\n              setUserToken('');\n            }\n\n            _context2.next = 10;\n            break;\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2[\"catch\"](0);\n            alert('Failed to fetch session storage');\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n\n  var clearStorage = function clearStorage() {\n    return _regeneratorRuntime.async(function clearStorage$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.clear());\n\n          case 3:\n            _context3.next = 8;\n            break;\n\n          case 5:\n            _context3.prev = 5;\n            _context3.t0 = _context3[\"catch\"](0);\n            alert('Failed to clear session storage');\n\n          case 8:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[0, 5]], Promise);\n  };\n\n  var authContext = React.useMemo(function () {\n    return {\n      signIn: function signIn(auth_key, user) {\n        setUserToken(auth_key);\n        setIsLoading(false);\n        saveAuth(auth_key);\n        setUser(user);\n      },\n      signUp: function signUp() {\n        setIsLoading(false);\n        setUserToken(\"asdf\");\n      },\n      signOut: function signOut() {\n        setIsLoading(false);\n        setUserToken(null);\n        clearStorage();\n      }\n    };\n  }, []);\n  React.useEffect(function () {\n    setTimeout(function () {\n      setIsLoading(false);\n    }, 1000);\n  }, []);\n  React.useEffect(function () {\n    readAuth();\n    readJwt();\n  }, []);\n\n  if (isLoading) {\n    return React.createElement(Splash, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return React.createElement(AuthContext.Provider, {\n    value: authContext,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 5\n    }\n  }, React.createElement(NavigationContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }\n  }, React.createElement(RootStackScreen, {\n    userToken: userToken,\n    jwtToken: jwtToken,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 9\n    }\n  })));\n});","map":{"version":3,"sources":["C:/Users/sawan/Desktop/stuff/EWI-Installer-App-v2 - Copy (2)/app/App.js"],"names":["React","useEffect","useState","NavigationContainer","createStackNavigator","createBottomTabNavigator","createDrawerNavigator","AsyncStorage","Entypo","styles","AuthContext","SignIn","CreateAccount","Projects","BarcodeScreen","JobsScreen","Details","Prospects","Profile","Splash","CameraScreen","AUTH_STORAGE_KEY","JWT_STORAGE_KEY","Burger","iconStyle","burgerOptions","navigation","headerLeft","toggleDrawer","JobsStack","JobsStackScreen","jwtToken","ProfileStack","ProfileStackScreen","BarcodeStack","BarcodeStackScreen","CameraStack","CameraStackScreen","UtilityTabs","UtilityTabScreen","Tabs","TabsScreen","Drawer","DrawerScreen","AuthStack","AuthStackScreen","title","RootStack","RootStackScreen","userToken","animationEnabled","isLoading","setIsLoading","setUserToken","user","setUser","setJWTToken","saveAuth","auth_key","setItem","alert","readAuth","getItem","user_token","clearStorage","clear","authContext","useMemo","signIn","signUp","signOut","setTimeout","readJwt"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA4C,OAA5C;;;;;;;;AAEA,SAASC,mBAAT,QAAoC,0BAApC;AACA,SAASC,oBAAT,QAAqC,yBAArC;AACA,SAASC,wBAAT,QAAyC,+BAAzC;AACA,SAASC,qBAAT,QAAsC,0BAAtC;AACA,OAAOC,YAAP,MAAyB,uCAAzB;AAEA,SAASC,MAAT,QAAuB,oBAAvB;AACA,OAAOC,MAAP;AACA,SAASC,WAAT;AACA,SACEC,MADF,EAEEC,aAFF,EAGEC,QAHF,EAIEC,aAJF,EAKEC,UALF,EAMEC,OANF,EAOEC,SAPF,EAQEC,OARF,EASEC,MATF,EAUEC,YAVF;AAcA,IAAMC,gBAAgB,GAAG,YAAzB;AACA,IAAMC,eAAe,GAAG,WAAxB;;AAGA,IAAMC,MAAM,GAAG,SAATA,MAAS,GAAM;AACnB,SACE,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,MAAb;AAAoB,IAAA,KAAK,EAAEd,MAAM,CAACe,SAAlC;AAA6C,IAAA,IAAI,EAAE,EAAnD;AAAuD,IAAA,KAAK,EAAC,OAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF;AAGD,CAJD;;AAMA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB;AAAA,MAAEC,UAAF,QAAEA,UAAF;AAAA,SAAmB;AAACC,IAAAA,UAAU,EAAE;AAAA,aAAM,oBAAC,gBAAD;AAAkB,QAAA,OAAO,EAAE;AAAA,iBAAMD,UAAU,CAACE,YAAX,EAAN;AAAA,SAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA4D,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA5D,CAAN;AAAA;AAAb,GAAnB;AAAA,CAAtB;;AAGA,IAAMC,SAAS,GAAGzB,oBAAoB,EAAtC;;AACA,IAAM0B,eAAe,GAAG,SAAlBA,eAAkB;AAAA,MAAEJ,UAAF,SAAEA,UAAF;AAAA,MAAcK,QAAd,SAAcA,QAAd;AAAA,SACtB,oBAAC,SAAD,CAAW,SAAX;AAAqB,IAAA,aAAa,EAAEN,aAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,SAAD,CAAW,MAAX;AAAkB,IAAA,IAAI,EAAC,MAAvB;AAA8B,IAAA,SAAS,EAAEV,UAAzC;AAAsD,IAAA,QAAQ,EAAEgB,QAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADsB;AAAA,CAAxB;;AAQA,IAAMC,YAAY,GAAG5B,oBAAoB,EAAzC;;AACA,IAAM6B,kBAAkB,GAAG,SAArBA,kBAAqB;AAAA,SACzB,oBAAC,YAAD,CAAc,SAAd;AAAwB,IAAA,aAAa,EAAER,aAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,YAAD,CAAc,MAAd;AAAqB,IAAA,IAAI,EAAC,SAA1B;AAAoC,IAAA,SAAS,EAAEP,OAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADyB;AAAA,CAA3B;;AAMA,IAAMgB,YAAY,GAAG9B,oBAAoB,EAAzC;;AACA,IAAM+B,kBAAkB,GAAG,SAArBA,kBAAqB;AAAA,SACzB,oBAAC,YAAD,CAAc,SAAd;AAAwB,IAAA,aAAa,EAAEV,aAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,YAAD,CAAc,MAAd;AAAqB,IAAA,IAAI,EAAC,SAA1B;AAAoC,IAAA,SAAS,EAAEX,aAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADyB;AAAA,CAA3B;;AAMA,IAAMsB,WAAW,GAAGhC,oBAAoB,EAAxC;;AACA,IAAMiC,iBAAiB,GAAG,SAApBA,iBAAoB;AAAA,SACxB,oBAAC,WAAD,CAAa,SAAb;AAAwB,IAAA,aAAa,EAAEZ,aAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,WAAD,CAAa,MAAb;AAAoB,IAAA,IAAI,EAAC,QAAzB;AAAkC,IAAA,SAAS,EAAEL,YAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADwB;AAAA,CAA1B;;AAMA,IAAMkB,WAAW,GAAGjC,wBAAwB,EAA5C;;AACA,IAAMkC,gBAAgB,GAAG,SAAnBA,gBAAmB;AAAA,SACvB,oBAAC,WAAD,CAAa,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,WAAD,CAAa,MAAb;AAAoB,IAAA,IAAI,EAAC,SAAzB;AAAmC,IAAA,SAAS,EAAEJ,kBAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE,oBAAC,WAAD,CAAa,MAAb;AAAoB,IAAA,IAAI,EAAC,QAAzB;AAAkC,IAAA,SAAS,EAAEE,iBAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADuB;AAAA,CAAzB;;AAOA,IAAMG,IAAI,GAAGnC,wBAAwB,EAArC;;AACA,IAAMoC,UAAU,GAAG,SAAbA,UAAa;AAAA,MAAEV,QAAF,SAAEA,QAAF;AAAA,SACjB,oBAAC,IAAD,CAAM,SAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD,CAAM,MAAN;AAAa,IAAA,IAAI,EAAC,MAAlB;AAAyB,IAAA,SAAS,EAAED,eAApC;AAAqD,IAAA,QAAQ,EAAEC,QAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADiB;AAAA,CAAnB;;AAMA,IAAMW,MAAM,GAAGpC,qBAAqB,EAApC;;AACA,IAAMqC,YAAY,GAAG,SAAfA,YAAe,QAAgB;AAAA,MAAdZ,QAAc,SAAdA,QAAc;AACnC,SACA,oBAAC,MAAD,CAAQ,SAAR;AAAkB,IAAA,gBAAgB,EAAC,MAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD,CAAQ,MAAR;AAAe,IAAA,IAAI,EAAC,MAApB;AAA2B,IAAA,SAAS,EAAEU,UAAtC;AAAkD,IAAA,QAAQ,EAAEV,QAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE,oBAAC,MAAD,CAAQ,MAAR;AAAe,IAAA,IAAI,EAAC,WAApB;AAAgC,IAAA,SAAS,EAAEQ,gBAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,EAGE,oBAAC,MAAD,CAAQ,MAAR;AAAe,IAAA,IAAI,EAAC,SAApB;AAA8B,IAAA,SAAS,EAAEN,kBAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,CADA;AAMA,CAPF;;AAUA,IAAMW,SAAS,GAAGxC,oBAAoB,EAAtC;;AACA,IAAMyC,eAAe,GAAG,SAAlBA,eAAkB;AAAA,SACtB,oBAAC,SAAD,CAAW,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,SAAD,CAAW,MAAX;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,SAAS,EAAElC,MAFb;AAGE,IAAA,OAAO,EAAE;AAAEmC,MAAAA,KAAK,EAAE;AAAT,KAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAME,oBAAC,SAAD,CAAW,MAAX;AACE,IAAA,IAAI,EAAC,eADP;AAEE,IAAA,SAAS,EAAElC,aAFb;AAGE,IAAA,OAAO,EAAE;AAAEkC,MAAAA,KAAK,EAAE;AAAT,KAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,CADsB;AAAA,CAAxB;;AAiBA,IAAMC,SAAS,GAAG3C,oBAAoB,EAAtC;;AACA,IAAM4C,eAAe,GAAG,SAAlBA,eAAkB,QAA6B;AAAA,MAA1BC,SAA0B,SAA1BA,SAA0B;AAAA,MAAflB,QAAe,SAAfA,QAAe;AACnD,SACA,oBAAC,SAAD,CAAW,SAAX;AAAqB,IAAA,UAAU,EAAC,MAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGkB,SAAS,GACR,oBAAC,SAAD,CAAW,MAAX;AACE,IAAA,IAAI,EAAC,KADP;AAEE,IAAA,SAAS,EAAEN,YAFb;AAGE,IAAA,OAAO,EAAE;AACPO,MAAAA,gBAAgB,EAAE;AADX,KAHX;AAKM,IAAA,QAAQ,EAAEnB,QALhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADQ,GASR,oBAAC,SAAD,CAAW,MAAX;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,SAAS,EAAEc,eAFb;AAGE,IAAA,OAAO,EAAE;AACPK,MAAAA,gBAAgB,EAAE;AADX,KAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVJ,CADA;AAoBA,CArBF;;AAuBA,gBAAe,YAAM;AAAA,wBACelD,KAAK,CAACE,QAAN,CAAe,IAAf,CADf;AAAA;AAAA,MACZiD,SADY;AAAA,MACDC,YADC;;AAAA,yBAEepD,KAAK,CAACE,QAAN,CAAe,IAAf,CAFf;AAAA;AAAA,MAEZ+C,SAFY;AAAA,MAEDI,YAFC;;AAAA,yBAGKrD,KAAK,CAACE,QAAN,CAAe,EAAf,CAHL;AAAA;AAAA,MAGZoD,IAHY;AAAA,MAGNC,OAHM;;AAAA,yBAIavD,KAAK,CAACE,QAAN,CAAe,IAAf,CAJb;AAAA;AAAA,MAIZ6B,QAJY;AAAA,MAIFyB,WAJE;;AAMnB,MAAMC,QAAQ,GAAG,SAAXA,QAAW,CAAOC,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAEPnD,YAAY,CAACoD,OAAb,CAAqBtC,gBAArB,EAAuCqC,QAAvC,CAFO;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAIbE,YAAAA,KAAK,CAAC,gCAAD,CAAL;;AAJa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAjB;;AAOA,MAAMC,QAAQ,GAAG,SAAXA,QAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAEYtD,YAAY,CAACuD,OAAb,CAAqBzC,gBAArB,CAFZ;;AAAA;AAEP0C,YAAAA,UAFO;;AAIb,gBAAIA,UAAU,KAAK,IAAnB,EAAyB;AACvBV,cAAAA,YAAY,CAACU,UAAD,CAAZ;AACD,aAFD,MAGI;AACFV,cAAAA,YAAY,CAAC,EAAD,CAAZ;AACD;;AATY;AAAA;;AAAA;AAAA;AAAA;AAWbO,YAAAA,KAAK,CAAC,iCAAD,CAAL;;AAXa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAjB;;AAeA,MAAMI,YAAY,GAAG,SAAfA,YAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAEXzD,YAAY,CAAC0D,KAAb,EAFW;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAIjBL,YAAAA,KAAK,CAAC,iCAAD,CAAL;;AAJiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAArB;;AAQA,MAAMM,WAAW,GAAGlE,KAAK,CAACmE,OAAN,CAAc,YAAM;AACtC,WAAO;AACLC,MAAAA,MAAM,EAAE,gBAACV,QAAD,EAAWJ,IAAX,EAAoB;AAC1BD,QAAAA,YAAY,CAACK,QAAD,CAAZ;AACAN,QAAAA,YAAY,CAAC,KAAD,CAAZ;AACAK,QAAAA,QAAQ,CAACC,QAAD,CAAR;AACAH,QAAAA,OAAO,CAACD,IAAD,CAAP;AACD,OANI;AAOLe,MAAAA,MAAM,EAAE,kBAAM;AACZjB,QAAAA,YAAY,CAAC,KAAD,CAAZ;AACAC,QAAAA,YAAY,CAAC,MAAD,CAAZ;AACD,OAVI;AAWLiB,MAAAA,OAAO,EAAE,mBAAM;AACblB,QAAAA,YAAY,CAAC,KAAD,CAAZ;AACAC,QAAAA,YAAY,CAAC,IAAD,CAAZ;AACAW,QAAAA,YAAY;AACb;AAfI,KAAP;AAiBD,GAlBmB,EAkBjB,EAlBiB,CAApB;AAoBAhE,EAAAA,KAAK,CAACC,SAAN,CAAgB,YAAM;AACpBsE,IAAAA,UAAU,CAAC,YAAM;AACfnB,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACD,KAFS,EAEP,IAFO,CAAV;AAGD,GAJD,EAIG,EAJH;AAKApD,EAAAA,KAAK,CAACC,SAAN,CAAgB,YAAM;AACpB4D,IAAAA,QAAQ;AACRW,IAAAA,OAAO;AACR,GAHD,EAGG,EAHH;;AAMA,MAAIrB,SAAJ,EAAe;AACb,WAAO,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;;AAID,SACE,oBAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAEe,WAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,eAAD;AAAiB,IAAA,SAAS,EAAEjB,SAA5B;AAAuC,IAAA,QAAQ,EAAElB,QAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CADF;AAOD,CAhFD","sourcesContent":["import React, { useEffect, useState }  from \"react\";\r\nimport { View, Text, StyleSheet, Button, TextInput, TouchableOpacity, Image } from \"react-native\";\r\nimport { NavigationContainer } from \"@react-navigation/native\";\r\nimport { createStackNavigator } from \"@react-navigation/stack\";\r\nimport { createBottomTabNavigator } from \"@react-navigation/bottom-tabs\";\r\nimport { createDrawerNavigator } from \"@react-navigation/drawer\";\r\nimport AsyncStorage from '@react-native-community/async-storage'\r\n//import { RNCamera } from 'react-native-camera';\r\nimport { Entypo } from '@expo/vector-icons';\r\nimport styles from './styles'\r\nimport { AuthContext } from \"./context\";\r\nimport {\r\n  SignIn,\r\n  CreateAccount,\r\n  Projects,\r\n  BarcodeScreen,\r\n  JobsScreen,\r\n  Details,\r\n  Prospects,\r\n  Profile,\r\n  Splash,\r\n  CameraScreen,\r\n} from \"./Screens\";\r\n\r\n\r\nconst AUTH_STORAGE_KEY = '@save_auth'\r\nconst JWT_STORAGE_KEY = '@save_jwt'\r\n\r\n\r\nconst Burger = () => {\r\n  return (\r\n    <Entypo name=\"menu\" style={styles.iconStyle} size={36} color=\"black\" />\r\n  );\r\n}\r\n\r\nconst burgerOptions = ({navigation}) => ({headerLeft: () => <TouchableOpacity onPress={() => navigation.toggleDrawer()}><Burger/></TouchableOpacity>,})\r\n\r\n\r\nconst JobsStack = createStackNavigator();\r\nconst JobsStackScreen = ({navigation, jwtToken}) => (\r\n  <JobsStack.Navigator screenOptions={burgerOptions}>\r\n    <JobsStack.Screen name=\"Jobs\" component={JobsScreen}  jwtToken={jwtToken}/>\r\n  </JobsStack.Navigator>\r\n);\r\n\r\n\r\n\r\nconst ProfileStack = createStackNavigator();\r\nconst ProfileStackScreen = () => (\r\n  <ProfileStack.Navigator screenOptions={burgerOptions}>\r\n    <ProfileStack.Screen name=\"Profile\" component={Profile} />\r\n  </ProfileStack.Navigator>\r\n);\r\n\r\nconst BarcodeStack = createStackNavigator();\r\nconst BarcodeStackScreen = () => (\r\n  <BarcodeStack.Navigator screenOptions={burgerOptions}>\r\n    <BarcodeStack.Screen name=\"Barcode\" component={BarcodeScreen} />\r\n  </BarcodeStack.Navigator>\r\n);\r\n\r\nconst CameraStack = createStackNavigator();\r\nconst CameraStackScreen = () => (\r\n  <CameraStack.Navigator  screenOptions={burgerOptions}>\r\n    <CameraStack.Screen name=\"Camera\" component={CameraScreen} />\r\n  </CameraStack.Navigator>\r\n);\r\n\r\nconst UtilityTabs = createBottomTabNavigator();\r\nconst UtilityTabScreen = () => (\r\n  <UtilityTabs.Navigator>\r\n    <UtilityTabs.Screen name=\"Barcode\" component={BarcodeStackScreen}  />\r\n    <UtilityTabs.Screen name=\"Camera\" component={CameraStackScreen} />\r\n  </UtilityTabs.Navigator>\r\n);\r\n\r\nconst Tabs = createBottomTabNavigator();\r\nconst TabsScreen = ({jwtToken}) => (\r\n  <Tabs.Navigator>\r\n    <Tabs.Screen name=\"Jobs\" component={JobsStackScreen} jwtToken={jwtToken} />\r\n  </Tabs.Navigator>\r\n);\r\n\r\nconst Drawer = createDrawerNavigator();\r\nconst DrawerScreen = ({jwtToken}) => {\r\n  return(\r\n  <Drawer.Navigator initialRouteName=\"Jobs\">\r\n    <Drawer.Screen name=\"Jobs\" component={TabsScreen} jwtToken={jwtToken}/>\r\n    <Drawer.Screen name=\"Utilities\" component={UtilityTabScreen} />\r\n    <Drawer.Screen name=\"Profile\" component={ProfileStackScreen} />\r\n  </Drawer.Navigator>\r\n)};\r\n\r\n\r\nconst AuthStack = createStackNavigator();\r\nconst AuthStackScreen = () => (\r\n  <AuthStack.Navigator>\r\n    <AuthStack.Screen\r\n      name=\"SignIn\"\r\n      component={SignIn}\r\n      options={{ title: \"Sign In\" }}\r\n    />\r\n    <AuthStack.Screen\r\n      name=\"CreateAccount\"\r\n      component={CreateAccount}\r\n      options={{ title: \"Create Account\" }}\r\n    />\r\n  </AuthStack.Navigator>\r\n);\r\n\r\n\r\n\r\nconst RootStack = createStackNavigator();\r\nconst RootStackScreen = ({ userToken, jwtToken }) => {\r\n  return (\r\n  <RootStack.Navigator headerMode=\"none\">\r\n    {userToken ? (\r\n      <RootStack.Screen\r\n        name=\"App\"\r\n        component={DrawerScreen}\r\n        options={{\r\n          animationEnabled: false\r\n        }}  jwtToken={jwtToken} \r\n      />\r\n    ) : (\r\n      <RootStack.Screen\r\n        name=\"Auth\"\r\n        component={AuthStackScreen}\r\n        options={{\r\n          animationEnabled: false\r\n        }}\r\n      />\r\n    )}\r\n  </RootStack.Navigator>\r\n)};\r\n\r\nexport default () => {\r\n  const [isLoading, setIsLoading] = React.useState(true);\r\n  const [userToken, setUserToken] = React.useState(null);\r\n  const [user, setUser] = React.useState('');\r\n  const [jwtToken, setJWTToken] = React.useState(null);\r\n\r\n  const saveAuth = async (auth_key) => {\r\n    try {\r\n      await AsyncStorage.setItem(AUTH_STORAGE_KEY, auth_key)\r\n    } catch (e) {\r\n      alert('Failed to save session storage')\r\n    }\r\n  }\r\n  const readAuth = async () => {\r\n    try {\r\n      const user_token = await AsyncStorage.getItem(AUTH_STORAGE_KEY)\r\n  \r\n      if (user_token !== null) {\r\n        setUserToken(user_token)\r\n      }\r\n      else{\r\n        setUserToken('')   \r\n      }\r\n    } catch (e) {\r\n      alert('Failed to fetch session storage')\r\n    }\r\n  }\r\n\r\n  const clearStorage = async () => {\r\n    try {\r\n      await AsyncStorage.clear()\r\n    } catch (e) {\r\n      alert('Failed to clear session storage')\r\n    }\r\n  }\r\n\r\n  const authContext = React.useMemo(() => {\r\n    return {\r\n      signIn: (auth_key, user) => {\r\n        setUserToken(auth_key);\r\n        setIsLoading(false);\r\n        saveAuth(auth_key);\r\n        setUser(user);\r\n      },\r\n      signUp: () => {\r\n        setIsLoading(false);\r\n        setUserToken(\"asdf\");\r\n      },\r\n      signOut: () => {\r\n        setIsLoading(false);\r\n        setUserToken(null);\r\n        clearStorage();\r\n      },\r\n    };\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    setTimeout(() => {\r\n      setIsLoading(false);\r\n    }, 1000);\r\n  }, []);\r\n  React.useEffect(() => {\r\n    readAuth();\r\n    readJwt();\r\n  }, []);\r\n\r\n\r\n  if (isLoading) {\r\n    return <Splash />;\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <AuthContext.Provider value={authContext}>\r\n      <NavigationContainer>\r\n        <RootStackScreen userToken={userToken} jwtToken={jwtToken} />\r\n      </NavigationContainer>\r\n    </AuthContext.Provider>\r\n  );\r\n};"]},"metadata":{},"sourceType":"module"}